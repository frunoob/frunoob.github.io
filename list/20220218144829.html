<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>集合基础 | FRUNOOB</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/img/apple-touch-icon.png?v=1.0.0">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicon-32x32.png?v=1.0.0">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicon-16x16.png?v=1.0.0">
    <link rel="manifest" href="/assets/img/site.webmanifest?v=1.0.0">
    <link rel="mask-icon" href="/assets/img/safari-pinned-tab.svg?v=1.0.0" color="#5bbad5">
    <link rel="shortcut icon" href="/assets/img/favicon.ico?v=1.0.0">
    <script src="/assets/prism.js"></script>
    <link rel="stylesheet" href="/assets/prism.css">
    <meta name="description" content="F的博客">
    <meta name="theme-color" content="#fffff8">
    <meta name="apple-mobile-web-app-title" content="F的博客">
    <meta name="application-name" content="F的博客">
    <meta name="msapplication-TileColor" content="#00aba9">
    <meta name="msapplication-config" content="/assets/img/browserconfig.xml?v=1.0.0">
    <link rel="preload" href="/assets/css/0.styles.ed43a7ee.css" as="style"><link rel="preload" href="/assets/js/app.0689f652.js" as="script"><link rel="preload" href="/assets/js/11.30c0976b.js" as="script"><link rel="preload" href="/assets/js/3.5a2d753d.js" as="script"><link rel="preload" href="/assets/js/8.f52b5694.js" as="script"><link rel="preload" href="/assets/js/86.8f5b1f88.js" as="script"><link rel="preload" href="/assets/js/12.7ce35587.js" as="script"><link rel="prefetch" href="/assets/js/10.092c3af6.js"><link rel="prefetch" href="/assets/js/100.aeb5c43b.js"><link rel="prefetch" href="/assets/js/101.4a427339.js"><link rel="prefetch" href="/assets/js/102.2c37ca49.js"><link rel="prefetch" href="/assets/js/103.3083711e.js"><link rel="prefetch" href="/assets/js/104.5264d15f.js"><link rel="prefetch" href="/assets/js/105.6395e9e7.js"><link rel="prefetch" href="/assets/js/106.2f3d6de2.js"><link rel="prefetch" href="/assets/js/107.13ff3795.js"><link rel="prefetch" href="/assets/js/108.efc2cf5e.js"><link rel="prefetch" href="/assets/js/13.92a54ab3.js"><link rel="prefetch" href="/assets/js/14.1f4e4afd.js"><link rel="prefetch" href="/assets/js/15.9dd3c44b.js"><link rel="prefetch" href="/assets/js/16.7d32ed8b.js"><link rel="prefetch" href="/assets/js/17.0096361a.js"><link rel="prefetch" href="/assets/js/18.201323d6.js"><link rel="prefetch" href="/assets/js/19.5a8ca66a.js"><link rel="prefetch" href="/assets/js/2.32a948de.js"><link rel="prefetch" href="/assets/js/20.eb46f084.js"><link rel="prefetch" href="/assets/js/21.be6fd7f0.js"><link rel="prefetch" href="/assets/js/22.e5bded19.js"><link rel="prefetch" href="/assets/js/23.ffdc39d0.js"><link rel="prefetch" href="/assets/js/24.59c11be8.js"><link rel="prefetch" href="/assets/js/25.4e59f695.js"><link rel="prefetch" href="/assets/js/26.b8d1894e.js"><link rel="prefetch" href="/assets/js/27.214212a8.js"><link rel="prefetch" href="/assets/js/28.f95352dc.js"><link rel="prefetch" href="/assets/js/29.728cb836.js"><link rel="prefetch" href="/assets/js/30.7bb59c9f.js"><link rel="prefetch" href="/assets/js/31.7cfc22f8.js"><link rel="prefetch" href="/assets/js/32.e5f501c7.js"><link rel="prefetch" href="/assets/js/33.d3cced8b.js"><link rel="prefetch" href="/assets/js/34.2d478eba.js"><link rel="prefetch" href="/assets/js/35.59cc2cf7.js"><link rel="prefetch" href="/assets/js/36.c2443472.js"><link rel="prefetch" href="/assets/js/37.710eedd4.js"><link rel="prefetch" href="/assets/js/38.3b59709c.js"><link rel="prefetch" href="/assets/js/39.c4f56ff5.js"><link rel="prefetch" href="/assets/js/4.e1ddf834.js"><link rel="prefetch" href="/assets/js/40.e1efb7fe.js"><link rel="prefetch" href="/assets/js/41.7036ae52.js"><link rel="prefetch" href="/assets/js/42.e08ccb75.js"><link rel="prefetch" href="/assets/js/43.7a1221b1.js"><link rel="prefetch" href="/assets/js/44.42ffa324.js"><link rel="prefetch" href="/assets/js/45.a08966e2.js"><link rel="prefetch" href="/assets/js/46.c31995f7.js"><link rel="prefetch" href="/assets/js/47.959b8ccd.js"><link rel="prefetch" href="/assets/js/48.d04a270b.js"><link rel="prefetch" href="/assets/js/49.2010d989.js"><link rel="prefetch" href="/assets/js/5.7ca69025.js"><link rel="prefetch" href="/assets/js/50.adaae3b9.js"><link rel="prefetch" href="/assets/js/51.bf94e51c.js"><link rel="prefetch" href="/assets/js/52.76e17626.js"><link rel="prefetch" href="/assets/js/53.5aa08e6e.js"><link rel="prefetch" href="/assets/js/54.3036e12c.js"><link rel="prefetch" href="/assets/js/55.836f18ea.js"><link rel="prefetch" href="/assets/js/56.59c059e4.js"><link rel="prefetch" href="/assets/js/57.67142b15.js"><link rel="prefetch" href="/assets/js/58.31511b5e.js"><link rel="prefetch" href="/assets/js/59.f517137d.js"><link rel="prefetch" href="/assets/js/6.d7ccc6af.js"><link rel="prefetch" href="/assets/js/60.c7dea27c.js"><link rel="prefetch" href="/assets/js/61.9364c28c.js"><link rel="prefetch" href="/assets/js/62.c60a0706.js"><link rel="prefetch" href="/assets/js/63.4158521c.js"><link rel="prefetch" href="/assets/js/64.b5585858.js"><link rel="prefetch" href="/assets/js/65.e3392f9f.js"><link rel="prefetch" href="/assets/js/66.e299aaa6.js"><link rel="prefetch" href="/assets/js/67.b3859cba.js"><link rel="prefetch" href="/assets/js/68.c42dc277.js"><link rel="prefetch" href="/assets/js/69.e13ab6f1.js"><link rel="prefetch" href="/assets/js/7.47fe1a8d.js"><link rel="prefetch" href="/assets/js/70.7cda0523.js"><link rel="prefetch" href="/assets/js/71.0acfdf10.js"><link rel="prefetch" href="/assets/js/72.b8c6844c.js"><link rel="prefetch" href="/assets/js/73.6891da58.js"><link rel="prefetch" href="/assets/js/74.8289be2a.js"><link rel="prefetch" href="/assets/js/75.4daa9a4e.js"><link rel="prefetch" href="/assets/js/76.7865ce92.js"><link rel="prefetch" href="/assets/js/77.1823b4b7.js"><link rel="prefetch" href="/assets/js/78.0942df76.js"><link rel="prefetch" href="/assets/js/79.e1e9fe38.js"><link rel="prefetch" href="/assets/js/80.a558c340.js"><link rel="prefetch" href="/assets/js/81.4a07aef8.js"><link rel="prefetch" href="/assets/js/82.778e445c.js"><link rel="prefetch" href="/assets/js/83.8f00db5f.js"><link rel="prefetch" href="/assets/js/84.746664f6.js"><link rel="prefetch" href="/assets/js/85.d8304849.js"><link rel="prefetch" href="/assets/js/87.c34315a4.js"><link rel="prefetch" href="/assets/js/88.4abb6acf.js"><link rel="prefetch" href="/assets/js/89.991ab01d.js"><link rel="prefetch" href="/assets/js/9.8f91be96.js"><link rel="prefetch" href="/assets/js/90.6717b0b3.js"><link rel="prefetch" href="/assets/js/91.09dc9d17.js"><link rel="prefetch" href="/assets/js/92.443a3880.js"><link rel="prefetch" href="/assets/js/93.e3df7c90.js"><link rel="prefetch" href="/assets/js/94.5ecc0f59.js"><link rel="prefetch" href="/assets/js/95.7723828a.js"><link rel="prefetch" href="/assets/js/96.17c44e08.js"><link rel="prefetch" href="/assets/js/97.2776e6dc.js"><link rel="prefetch" href="/assets/js/98.b6750ed3.js"><link rel="prefetch" href="/assets/js/99.8b4d02a1.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ed43a7ee.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="body" data-v-0e9246d5><header data-v-0e9246d5><div data-v-0e9246d5><div data-v-0bddd78f data-v-0e9246d5><header class="head" data-v-0bddd78f><div id="left-head" data-v-0bddd78f><a href="/" class="router-link-active" data-v-0bddd78f>FRUNOOB</a></div> <div class="search" data-v-0bddd78f><div class="search-box" data-v-0bddd78f><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div></header></div></div> <div data-v-0e9246d5><div data-v-63f17bab data-v-0e9246d5><hr class="separator" data-v-63f17bab></div></div></header> <div data-v-0e9246d5><div class="bottom" data-v-0e9246d5><div class="bright" data-v-0e9246d5></div> <div class="bleft" data-v-0e9246d5><p class="updated" data-v-0e9246d5>updated: 3/25/2022, 18:31:44 GMT+8</p> <a href="https://github.com/frunoob/journal/edit/master/journal/list/20220218144829.md" target="_blank" data-v-0e9246d5>✏️修改此页面</a></div></div></div> <div data-v-0e9246d5><div class="content content__default" data-v-0e9246d5><h1 id="集合基础"><a href="#集合基础" class="header-anchor">#</a> 集合基础</h1> <blockquote><p></p><div class="table-of-contents"><ul><li><a href="#_0-集合框架图">0.集合框架图</a></li><li><a href="#_1-集合的由来">1. 集合的由来</a></li><li><a href="#_2-集合是什么">2. 集合是什么</a></li><li><a href="#_3-java-集合框架">3. Java 集合框架</a></li><li><a href="#_4-iterator-迭代器">4. Iterator 迭代器</a></li><li><a href="#_5-collection-接口介绍">5. Collection 接口介绍</a></li><li><a href="#_6-list-介绍">6. List 介绍</a><ul><li><a href="#_6-1-arraylist-数组">6.1 ArrayList（数组）</a></li><li><a href="#_6-2-vector-数组实现、线程同步">6.2 Vector（数组实现、线程同步）</a></li><li><a href="#_6-3-linklist-链表">6.3 LinkList（链表）</a></li></ul></li><li><a href="#_7-set-介绍">7. Set 介绍</a><ul><li><a href="#_7-1-hashset-hash-表">7.1 HashSet（Hash 表）</a></li><li><a href="#_7-2-treeset-二叉树">7.2 TreeSet（二叉树）</a></li><li><a href="#_7-3-linkhashset-hashset-linkedhashmap">7.3 LinkHashSet（HashSet+LinkedHashMap）</a></li></ul></li><li><a href="#_8-map-介绍">8. Map 介绍</a><ul><li><a href="#_8-1-hashmap-线程不安全">8.1 HashMap（线程不安全）</a></li><li><a href="#_8-2-hashtable-线程安全">8.2 HashTable（线程安全）</a></li><li><a href="#_8-3-treemap-可排序">8.3 TreeMap（可排序）</a></li><li><a href="#_8-4-linkhashmap-记录插入顺序">8.4 LinkHashMap（记录插入顺序）</a></li></ul></li><li><a href="#_9-泛型">9. 泛型</a></li></ul></div><p></p></blockquote> <h2 id="_0-集合框架图"><a href="#_0-集合框架图" class="header-anchor">#</a> 0.集合框架图</h2> <p><img src="https://cdn.jsdelivr.net/gh/frunoob/images/202202181730989.png" alt=""></p> <h2 id="_1-集合的由来"><a href="#_1-集合的由来" class="header-anchor">#</a> 1. 集合的由来</h2> <p>当 Java 程序中需要存放数据的时候，通常会定义变量来实现数据的存储，但是，当需要存储大量数据的时候该怎么办呢？这时首先想到的是数组，但是！数组只能存放同一类型的数据，而且其长度是固定的，那怎么办了？集合便应运而生了。</p> <h2 id="_2-集合是什么"><a href="#_2-集合是什么" class="header-anchor">#</a> 2. 集合是什么</h2> <p>Java 集合类存放在 java.util 包中，是一个用来存放对象的容器。</p> <p>集合的特点：</p> <ol><li>集合只能存放对象。比如将一个 int 型数据存入集合中时，它会自动转换成 Integer 类后存入集合（自动装箱操作），Java 中每一种基本数据类型都有对应的引用类型（封装类）。</li> <li>集合存放的都是对象的引用，而非对象本身。所以我们称集合中的对象就是集合中对象的引用。对象本身还是放在堆内存中。</li> <li>集合可以存放不同类型，不限数量的数据类型。</li></ol> <h2 id="_3-java-集合框架"><a href="#_3-java-集合框架" class="header-anchor">#</a> 3. Java 集合框架</h2> <p><img src="https://cdn.jsdelivr.net/gh/frunoob/images/202202181407395.png" alt="图片描述"></p> <p>通过上面的图可以发现：</p> <ol><li>集合主要分为 Collection 和 Map 两个接口。</li> <li>Collection 接口依赖了 Iterator 接口。</li> <li>Collection 又分别被 List 和 Set 继承。</li> <li>List 被 AbstractList 实现，然后分为 3 个子类，ArrayList，LinkList 和 VectorList。</li> <li>Set 被 AbstractSet 实现，又分为 2 个子类，HashSet 和 TreeSet。</li> <li>Map 被 AbstractMap 实现，又分为 2 个子类，HashMap 和 TreeMap。</li> <li>Map 被 Hashtable 实现。</li></ol> <p>下面就围绕这些接口、抽象类和实现类来讲解。</p> <h2 id="_4-iterator-迭代器"><a href="#_4-iterator-迭代器" class="header-anchor">#</a> 4. Iterator 迭代器</h2> <ol><li>Iterator 是一个用来遍历集合中元素的接口，主要有 hashNext()，next()，remove() 三种方法。</li> <li>它的子接口 ListIterator 在它的基础上又添加了三种方法，分别是 add()，previous()，hasPrevious()。</li> <li>它是 Java 集合的顶层接口（不包括 map 系列的集合，Map 接口是 * Map 系列集合的顶层接口）
<ul><li>Object next()：返回迭代器刚越过的元素的引用，返回值是 Object，需要强制转换成自己需要的类型。</li> <li>boolean hasNext()：判断容器内是否还有可供访问的元素。</li> <li>void remove()：删除迭代器刚越过的元素。</li></ul></li></ol> <p>总结：除了 Map 系列的集合，我们都能通过迭代器来对集合中的元素进行遍历。</p> <p>示例代码</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Iterator</span> it <span class="token operator">=</span>  hashSet<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_5-collection-接口介绍"><a href="#_5-collection-接口介绍" class="header-anchor">#</a> 5. Collection 接口介绍</h2> <p>Collection 的作用就是规定了一个集合有哪些基本的操作。</p> <p><img src="https://cdn.jsdelivr.net/gh/frunoob/images/202202181407287.png" alt="图片描述"></p> <ul><li>int size()　获取元素个数</li> <li>boolean isEmpty()　是否个数为零</li> <li>boolean contains(Object element)　是否包含指定元素</li> <li>boolean add(E element)　添加元素，成功时返回 true</li> <li>boolean remove(Object element)　删除元素，成功时返回 true</li> <li>Iterator<E> iterator()　获取迭代器</E></li> <li>Object[] toArray()　返回一个包含集合中所有元素的数组</li> <li><T> T[] toArray(T[] a)　返回一个包含集合中所有元素的数组，运行时根据集合元素的类型指定数组的类型
</T></li></ul> <h2 id="_6-list-介绍"><a href="#_6-list-介绍" class="header-anchor">#</a> 6. List 介绍</h2> <p>Java 的 List 是非常常用的数据类型。List 是有序的 Collection。Java 的 List 有三个常用的实现类：分别是 ArrayList、Vector 和 LinkedList。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">&quot;king&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;david&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">&quot;tom&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">&quot;king&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Student</span> student <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>student<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        list<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StudentComp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_6-1-arraylist-数组"><a href="#_6-1-arraylist-数组" class="header-anchor">#</a> 6.1 ArrayList（数组）</h3> <p>ArrayList 是最常用的 List 实现类，内部是通过数组实现的，它允许对元素进行快速随机访问。数组的缺点是每个元素之间不能有间隔，当数组大小不满足时需要增加存储能力，就要将已经有数组的数据复制到新的存储空间中。当从 ArrayList 的中间位置插入或者删除元素时，需要对数组进行复制、移动代价比较高。因此，它适合随机查找和遍历，不适合插入和删除。</p> <h3 id="_6-2-vector-数组实现、线程同步"><a href="#_6-2-vector-数组实现、线程同步" class="header-anchor">#</a> 6.2 Vector（数组实现、线程同步）</h3> <p>Vector 与 ArrayList 一样，也是通过数组实现的，不同的是它支持线程的同步，即某一时刻只有一个线程能够写 Vector，避免多线程同时写而引起的不一致性，但实现同步需要很高的花费，因此访问它比访问 ArrayList 慢。</p> <h3 id="_6-3-linklist-链表"><a href="#_6-3-linklist-链表" class="header-anchor">#</a> 6.3 LinkList（链表）</h3> <p>LinkedList 是用链表结构存储数据的，很适合数据的动态插入和删除，随机访问和遍历速度比较慢。另外，他还提供了 List 接口中没有定义的方法，专门用于操作表头和表尾元素，可以当作堆栈、队列和双向队列使用。</p> <p>新添加的方法：</p> <ul><li>addFirst()</li> <li>removeFirst()</li> <li>addLast()</li> <li>removeLast()</li> <li>getFirst()</li> <li>getLast()</li></ul> <h2 id="_7-set-介绍"><a href="#_7-set-介绍" class="header-anchor">#</a> 7. Set 介绍</h2> <p>Set 注重独一无二的性质，该体系集合用于存储无序 (存入和取出的顺序不一定相同) 元素，值不能重复。对象相等的本质是由对象 hashCode 值（java 是依据对象的内存地址计算出的此序号）判断得出的，如果想要让两个不同的对象视为相等的，就必须覆盖 Object 的 hashCode 方法和 equals 方法。</p> <h3 id="_7-1-hashset-hash-表"><a href="#_7-1-hashset-hash-表" class="header-anchor">#</a> 7.1 HashSet（Hash 表）</h3> <p>哈希表里存放的是哈希值。HashSet 存储元素的顺序并不是按照存入时的顺序（和 List 显然不同） 而是按照哈希值来存的，所以取数据也是按照哈希值获取。</p> <p>元素的哈希值是通过元素的 hashcode 方法来获取的，HashSet 首先判断两个元素的哈希值，如果哈希值一样，接着会比较 equals 方法，如果 equals 结果为 true ，HashSet 就视为同一个元素；如果 equals 为 false 就不是同一个元素。</p> <p>哈希值相同 equals 为 false 的元素是怎么存储呢？就是在同样的哈希值下顺延（可以认为哈希值相同的元素放在一个哈希桶中），也就是哈希值一样的存一列。</p> <p>如图 1 表示 hashCode 值不相同的情况，图 2 则表示 hashCode 值相同，但 equals 不相同的情况。</p> <p><img src="https://cdn.jsdelivr.net/gh/frunoob/images/202202181407188.png" alt="图片描述"></p> <p><strong>HashSet 通过 hashCode 值来确定元素在内存中的位置。一个 hashCode 位置上可以存放多个元素。</strong></p> <h3 id="_7-2-treeset-二叉树"><a href="#_7-2-treeset-二叉树" class="header-anchor">#</a> 7.2 TreeSet（二叉树）</h3> <p>TreeSet() 是使用二叉树的原理对新 add() 的对象按照指定的顺序排序（升序、降序），每增加一个对象都会进行排序，将对象插入的二叉树指定的位置。</p> <p>Integer 和 String 对象都可以进行默认的 TreeSet 排序，而自定义类的对象是不可以的，自定义的类必须实现 Comparable 接口。</p> <p><strong>比较器</strong></p> <ul><li>当两个对象进行比较的时候，需要定义比较规则。这时候就需要使用比较器。</li> <li>比较器由两种：内部比较器（Comparable）和外部比较器（Comparator）。</li></ul> <p>在覆写 compareTo() 函数时，要返回相应的值才能使 TreeSet 按照一定的规则来排序比较此对象与指定对象的顺序。如果该对象小于、等于或大于指定对象，则分别返回负整数、零或正整数。</p> <p><strong>基本类型（不要比较器</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Set</span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TreeSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Object</span> obj <span class="token operator">:</span> set<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>注意：基本类型和 String 不需要比较器是因为封装类和 String 类都实现了 Comparable 接口。</p> <p><strong>自定义类型（需要比较器）</strong></p> <p>Student 类</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token keyword">implements</span> <span class="token class-name">Comparable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> stuNo<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> stuName<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token keyword">int</span> stuNo<span class="token punctuation">,</span> <span class="token keyword">final</span> <span class="token class-name">String</span> stuName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>stuNo <span class="token operator">=</span> stuNo<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>stuName <span class="token operator">=</span> stuName<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compareTo</span><span class="token punctuation">(</span><span class="token class-name">Student</span> student<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> student<span class="token punctuation">.</span>stuName<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>stuName<span class="token punctuation">)</span> <span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Student [stuName=&quot;</span> <span class="token operator">+</span> stuName <span class="token operator">+</span> <span class="token string">&quot;, stuNo=&quot;</span> <span class="token operator">+</span> stuNo <span class="token operator">+</span> <span class="token string">&quot;]&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getStuNo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> stuNo<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setStuNo</span><span class="token punctuation">(</span><span class="token keyword">int</span> stuNo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>stuNo <span class="token operator">=</span> stuNo<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getStuName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> stuName<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setStuName</span><span class="token punctuation">(</span><span class="token class-name">String</span> stuName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>stuName <span class="token operator">=</span> stuName<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>测试类</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Set</span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TreeSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 声明集合时需要定义比较器</span>
        set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">&quot;david&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;tom&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">&quot;king&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Object</span> obj <span class="token operator">:</span> set<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Student</span><span class="token punctuation">)</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_7-3-linkhashset-hashset-linkedhashmap"><a href="#_7-3-linkhashset-hashset-linkedhashmap" class="header-anchor">#</a> 7.3 LinkHashSet（HashSet+LinkedHashMap）</h3> <p>对于 LinkedHashSet 而言，它继承于 HashSet、又基于 LinkedHashMap 来实现的。</p> <p>LinkedHashSet 底层使用 LinkedHashMap 来保存所有元素，它继承于 HashSet，其所有的方法操作上与 HashSet 相同，因此 LinkedHashSet 的实现上非常简单，只提供了四个构造方法，并通过传递一个标识参数，调用父类的构造器。</p> <h2 id="_8-map-介绍"><a href="#_8-map-介绍" class="header-anchor">#</a> 8. Map 介绍</h2> <p>Map 是一种特殊的集合，它使用键 - 值对的方式存储数据，通常是通过键来获得值。</p> <ul><li>key-value 对应的模式</li> <li>key 不能重复的，value 可以重复的。</li> <li>Map.keySet() 获得 map 中所有的 key。</li> <li>Map.values() 获得 map 中所有的 value。</li></ul> <h3 id="_8-1-hashmap-线程不安全"><a href="#_8-1-hashmap-线程不安全" class="header-anchor">#</a> 8.1 HashMap（线程不安全）</h3> <p>HashMap 根据键的 hashCode 值存储数据，大多数情况下可以直接定位到它的值，因而具有很快的访问速度，但遍历顺序却是不确定的。 HashMap 最多只允许一条记录的键为 null，允许多条记录的值为 null。HashMap 非线程安全，即任一时刻可以有多个线程同时写 HashMap，可能会导致数据的不一致。</p> <h3 id="_8-2-hashtable-线程安全"><a href="#_8-2-hashtable-线程安全" class="header-anchor">#</a> 8.2 HashTable（线程安全）</h3> <p>Hashtable 是遗留类，很多映射的常用功能与 HashMap 类似，不同的是它承自 Dictionary 类，并且是线程安全的，任一时间只有一个线程能写 Hashtable，并发性不如 ConcurrentHashMap，因为 ConcurrentHashMap 引入了分段锁。Hashtable 不建议在新代码中使用，不需要线程安全的场合可以用 HashMap 替换，需要线程安全的场合可以用 ConcurrentHashMap 替换。</p> <h3 id="_8-3-treemap-可排序"><a href="#_8-3-treemap-可排序" class="header-anchor">#</a> 8.3 TreeMap（可排序）</h3> <p>TreeMap 实现 SortedMap 接口，能够把它保存的记录根据键排序，默认是按键值的升序排序，也可以指定排序的比较器，当用 Iterator 遍历 TreeMap 时，得到的记录是排过序的。如果使用排序的映射，建议使用 TreeMap。在使用 TreeMap 时，key 必须实现 Comparable 接口或者在构造 TreeMap 传入自定义的 Comparator，否则会在运行时抛出 java.lang.ClassCastException 类型的异常。</p> <h3 id="_8-4-linkhashmap-记录插入顺序"><a href="#_8-4-linkhashmap-记录插入顺序" class="header-anchor">#</a> 8.4 LinkHashMap（记录插入顺序）</h3> <p>LinkedHashMap 是 HashMap 的一个子类，保存了记录的插入顺序，在用 Iterator 遍历 LinkedHashMap 时，先得到的记录肯定是先插入的，也可以在构造时带参数，按照访问次序排序。</p> <h2 id="_9-泛型"><a href="#_9-泛型" class="header-anchor">#</a> 9. 泛型</h2> <p>Java 泛型（generics）是Java 5中引入的一个新特性，<strong>泛型提供了编译时类型安全监测机制</strong>，该机制允许程序员在编译时监测非法的类型。</p> <p>众所周知，集合对象中存储的都是 Object 类型的对象，存储元素时，元素类型可以自动转换为 Object。当需要读取元素时则需要强制将 Object 类型转换成对应的子类型，这种操作是不安全的行为。使用泛型可以约束存入数据类型，提高数据的安全性。</p> <p><strong>泛型的本质是参数化类型</strong>，也就是所操作的数据类型被指定为一个参数。</p> <p>泛型概念</p> <ul><li>泛型：是一种约束，可以在代码编译阶段对存储于集合的数据进行类型控制。</li> <li>泛型擦除：泛型是提供给 javac 编译器使用的，它用于限定集合的输入类型，让编译器在源代码级别上。但编译器编译完带有泛形的 java 程序后，生成的 class 文件中将不再带有泛形信息，以此使程序运行效率不受到影响，这个过程称之为 “擦除”。</li></ul> <p>集合中使用泛型：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//使用了泛型后，集合中的数据只能存入泛型定义的类型。并且在操作的时候不需要类型转换。</span>
<span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> stuNameList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
stuNameList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;david&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
stuNameList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;tom&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
stuNameList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;king&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> stuName<span class="token operator">:</span> stuNameList<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>stuName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>注意：泛型仅在编译中进行类型约束，在编译后的代码中没有泛型，底层还是类型转换的，也就是泛型擦除。</p></blockquote> <p>泛型除了在集合中使用外，还有三种常用的使用方式：<strong>泛型类</strong>，<strong>泛型接口</strong>和<strong>泛型方法</strong>。</p> <ul><li>泛型类</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/*
    1: 把泛型定义在类上
    2: 类型变量定义在类上, 方法中也可以使用
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ObjectTool</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token class-name">T</span> obj<span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token class-name">T</span> <span class="token function">getObj</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setObj</span><span class="token punctuation">(</span><span class="token class-name">T</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>obj <span class="token operator">=</span> obj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>泛型接口</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//同泛型类类似</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Man</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">T</span> <span class="token function">getMan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><p>泛型方法</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// 定义泛型方法..</span>
<span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token class-name">T</span> t<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul></div></div> <div data-v-0e9246d5><p class="footer" data-v-0e9246d5>frunoob@163.com</p></div></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.0689f652.js" defer></script><script src="/assets/js/11.30c0976b.js" defer></script><script src="/assets/js/3.5a2d753d.js" defer></script><script src="/assets/js/8.f52b5694.js" defer></script><script src="/assets/js/86.8f5b1f88.js" defer></script><script src="/assets/js/12.7ce35587.js" defer></script>
  </body>
</html>
