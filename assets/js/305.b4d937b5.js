(window.webpackJsonp=window.webpackJsonp||[]).push([[305],{506:function(t,s,e){"use strict";e.r(s);var a=e(5),l=Object(a.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"关于mysql联合索引的一些问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#关于mysql联合索引的一些问题"}},[t._v("#")]),t._v(" 关于mysql联合索引的一些问题")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("前提")]),t._v(" "),e("p",[t._v("仅针对 mysql 5.7")])]),t._v(" "),e("p",[t._v("国外项目上数据库的慢日志中，有一个查询语句时间超过了60s，通过explain发现竟然扫描 了全表数据，2000万数据都扫描了。")]),t._v(" "),e("p",[t._v("后来发现是因为对联合索引的错误使用导致的。")]),t._v(" "),e("p",[t._v("使用联合索引需要注意几点")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("查询语句的where条件中必须有索引最左侧字段 即联合索引为(a,b)，那么where条件中必须有a。")])]),t._v(" "),e("li",[e("p",[t._v("where条件中字段的顺序不会影响索引的生效，因为mysql会自动调整顺序以满足索引的顺序。")])]),t._v(" "),e("li",[e("p",[t._v("联合索引中字段最多16个")])]),t._v(" "),e("li",[e("p",[t._v("最左原则是指：联合索引为(a,b,c)，where条件如下都会用到索引：(1) a = 1 ;(2) a = 1 and b = 1;"),e("br"),t._v("\n(3) a = 1 and b = 1 and c = 1。where条件如下不会用到索引:(1) b = 1 (2) b = 1 and c = 1 (3) c = 1。")])])]),t._v(" "),e("p",[t._v("一句话就是： where条件中包含的联合索引的字段，在联合索引中必须是"),e("strong",[t._v("从左开始 连续不能跳")])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("什么时候改用联合索引了")]),t._v(" "),e("p",[t._v("update: 当where条件字段包含了索引列的时候，此时会将where查询字段的值的所有记录上锁，导致更新速度变为单线程")])])])}),[],!1,null,null,null);s.default=l.exports}}]);