(window.webpackJsonp=window.webpackJsonp||[]).push([[247],{451:function(t,e,s){"use strict";s.r(e);var r=s(5),a=Object(r.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"ubuntub站录播姬"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ubuntub站录播姬"}},[t._v("#")]),t._v(" ubuntuB站录播姬")]),t._v(" "),s("p",[t._v("首先准备一块硬盘来存放将要录制的直播视频\n我选择的是ntfs格式的硬盘，方便我直接从linux服务器上取下来然后在我的笔记本上看，从服务器传文件太慢了。")]),t._v(" "),s("p",[t._v("想要让linux读取ntfs格式的硬盘需要安装NTFS-3G，安装方法请百度。")]),t._v(" "),s("p",[t._v("成功挂载后，就可以安装录播姬了。")]),t._v(" "),s("h2",{attrs:{id:"用-systemd-运行录播姬命令行版¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#用-systemd-运行录播姬命令行版¶"}},[t._v("#")]),t._v(" 用 systemd 运行录播姬命令行版"),s("a",{attrs:{href:"https://rec.danmuji.org/user/install/cli-systemd/#%E7%94%A8-systemd-%E8%BF%90%E8%A1%8C%E5%BD%95%E6%92%AD%E5%A7%AC%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%89%88",target:"_blank",rel:"noopener noreferrer"}},[t._v("¶"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"下载录播姬¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#下载录播姬¶"}},[t._v("#")]),t._v(" 下载录播姬"),s("a",{attrs:{href:"https://rec.danmuji.org/user/install/cli-systemd/#%E4%B8%8B%E8%BD%BD%E5%BD%95%E6%92%AD%E5%A7%AC",target:"_blank",rel:"noopener noreferrer"}},[t._v("¶"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("下载链接和解压方法可以参考 "),s("a",{attrs:{href:"https://rec.danmuji.org/user/install/cli/",target:"_blank",rel:"noopener noreferrer"}},[t._v("命令行版"),s("OutboundLink")],1),t._v(" 页面。")]),t._v(" "),s("p",[t._v("下面给出一个简单的例子：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("mkdir brec\ncd brec\n# wget https://下载链接\nunzip BililiveRecorder-CLI-linux-x64.zip\nchmod +x BililiveRecorder.Cli\n\n# 确认录播姬可以运行、并检查版本号\n./BililiveRecorder.Cli --version\n")])])]),s("h2",{attrs:{id:"创建服务¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建服务¶"}},[t._v("#")]),t._v(" 创建服务"),s("a",{attrs:{href:"https://rec.danmuji.org/user/install/cli-systemd/#%E5%88%9B%E5%BB%BA%E6%9C%8D%E5%8A%A1",target:"_blank",rel:"noopener noreferrer"}},[t._v("¶"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("新建一个文件 "),s("code",[t._v("/etc/systemd/system/brec.service")])]),t._v(" "),s("p",[t._v("写入以下内容，注意调整 "),s("code",[t._v("ExecStart=")]),t._v(" 后面的文件路径和参数。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('[Unit]\nDescription=BililiveRecorder\nAfter=network.target\n\n[Service]\nExecStart=录播姬所在位置/BililiveRecorder.Cli run --bind "http://*:2356" --http-basic-user "用户名" --http-basic-pass "密码" "录播工作目录"\n\n[Install]\nWantedBy=multi-user.target\n')])])]),s("p",[t._v("其他录播姬的命令和参数请参考 "),s("a",{attrs:{href:"https://rec.danmuji.org/user/install/cli/",target:"_blank",rel:"noopener noreferrer"}},[t._v("命令行版"),s("OutboundLink")],1),t._v(" 页面。")]),t._v(" "),s("p",[t._v("重要安全提醒")]),t._v(" "),s("p",[t._v("如果要把录播姬的管理页面对公网开放，请一定一定一定做好安全措施，给录播姬设置一个密码，或使用其他有身份验证功能的反向代理软件。")]),t._v(" "),s("p",[t._v("直接把没有身份验证的录播姬暴露到公网可能会有严重的安全风险。轻则被添加一大堆直播间导致硬盘塞满，重则可能会被任意上传下载文件。（理论上是不能通过录播姬来做到任意代码执行的，不过不做任何保证）")]),t._v(" "),s("p",[t._v("然后重载服务：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("sudo systemctl daemon-reload\n")])])]),s("p",[t._v("每次修改了 "),s("code",[t._v("brec.service")]),t._v(" 文件后都需要运行这个命令重载一次。")]),t._v(" "),s("p",[t._v("启动录播姬：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("sudo systemctl start brec\n")])])]),s("p",[s("img",{attrs:{src:"https://rec.danmuji.org/assets/images/user-install-cli-systemd.png",alt:"使用 systemd 运行的截图"}})]),t._v(" "),s("h2",{attrs:{id:"设置开机启动¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设置开机启动¶"}},[t._v("#")]),t._v(" 设置开机启动"),s("a",{attrs:{href:"https://rec.danmuji.org/user/install/cli-systemd/#%E8%AE%BE%E7%BD%AE%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8",target:"_blank",rel:"noopener noreferrer"}},[t._v("¶"),s("OutboundLink")],1)]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("sudo systemctl enable brec\n")])])]),s("p",[t._v("可以用以下命令禁用开机启动")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("sudo systemctl disable brec\n")])])]),s("h2",{attrs:{id:"查看和控制运行状态¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看和控制运行状态¶"}},[t._v("#")]),t._v(" 查看和控制运行状态"),s("a",{attrs:{href:"https://rec.danmuji.org/user/install/cli-systemd/#%E6%9F%A5%E7%9C%8B%E5%92%8C%E6%8E%A7%E5%88%B6%E8%BF%90%E8%A1%8C%E7%8A%B6%E6%80%81",target:"_blank",rel:"noopener noreferrer"}},[t._v("¶"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("查看运行状态：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("sudo systemctl status brec\n")])])]),s("p",[t._v("运行、停止、重启：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("sudo systemctl start brec\nsudo systemctl stop brec\nsudo systemctl restart brec\n")])])]),s("p",[t._v("查看日志：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("sudo journalctl -u brec.service\n")])])]),s("p",[t._v("也可以直接查看录播姬旁边 logs 文件夹内的日志文件。")])])}),[],!1,null,null,null);e.default=a.exports}}]);