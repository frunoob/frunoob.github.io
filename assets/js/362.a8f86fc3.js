(window.webpackJsonp=window.webpackJsonp||[]).push([[362],{567:function(t,e,s){"use strict";s.r(e);var a=s(5),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"android-读取文件-管理文件-allow-access-to-manage-all-files-can-t-read-file-not-found-as-file-or-resource-申请允许管理所有文件权限"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#android-读取文件-管理文件-allow-access-to-manage-all-files-can-t-read-file-not-found-as-file-or-resource-申请允许管理所有文件权限"}},[t._v("#")]),t._v(" android|读取文件|管理文件|allow access to manage all files|can't read file|not found as file or resource|申请允许管理所有文件权限")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("环境")]),t._v(" "),s("p",[t._v("Target SDK Version: API 34 android 14\n开发软件 android studio 2023.01.01")])]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),s("p",[t._v("android 11 之后，单单增加"),s("code",[t._v("uses-permission")]),t._v("标签已经不行了，必须要在使用中授权，让用户手动开启权限。\n这也就是为什么之前SDK26的时候是成功的但是修改为SDK31之后就不行了")])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("参考")]),t._v(" "),s("p",[t._v("https://blog.csdn.net/Mr_WuTengFei/article/details/113742442")]),t._v(" "),s("p",[t._v("https://stackoverflow.com/questions/73591741/android-itext-pdfreader-throws-ioexception-not-found-as-file-or-resource")])]),t._v(" "),s("p",[t._v("只要在启动应用的时候进行判断就行了，加上以下代码")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v(' if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.R) {\n      if (Environment.isExternalStorageManager()) {\n          //todo when permission is granted\n      } else {\n          //request for the permission\n          Intent intent = new Intent(Settings.ACTION_MANAGE_APP_ALL_FILES_ACCESS_PERMISSION);\n          Uri uri = Uri.fromParts("package", getPackageName(), null);\n          intent.setData(uri);\n          startActivity(intent);\n      }\n  }\n\n')])])]),s("p",[s("strong",[t._v("或者")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('Intent intent = new Intent(Settings.ACTION_MANAGE_APP_ALL_FILES_ACCESS_PERMISSION);\n                    intent.setData(Uri.parse("package:" + getPackageName()));\nstartActivityForResult(intent, Request_Code);\n\n')])])]),s("p",[s("strong",[t._v("最后需要注意不要忘记在"),s("code",[t._v("AndroidManifest.xml")]),t._v("中加上")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />\n<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> \n<uses-permission android:name="android.permission.MANAGE_EXTERNAL_STORAGE" />\n\n')])])])])}),[],!1,null,null,null);e.default=n.exports}}]);